<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gerenciador de Produtos Moderno</title>

<a href="index.html">vitrine </a><p></p>


<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

  body { font-family:'Inter',sans-serif; margin:0; background:#f5f7fb; }
  header { display:flex; justify-content:space-between; align-items:center; padding:20px; background:#4f46e5; color:white; }
  header h1 { font-size:24px; margin:0; }
  header button { background:#10b981; border:none; padding:10px 18px; color:white; border-radius:8px; cursor:pointer; font-weight:600; }

  main { max-width:900px; margin:20px auto; display:flex; flex-direction:column; gap:20px; }

  /* Formulário moderno */
  .product-form { background:white; border-radius:12px; padding:20px; box-shadow:0 4px 12px rgba(0,0,0,0.05); }
  .product-form h2 { margin-top:0; margin-bottom:15px; font-size:20px; color:#111; }
  .product-form label { display:block; margin:10px 0 5px; font-weight:600; font-size:14px; }
  .product-form input, .product-form select { width:100%; padding:8px; border:1px solid #ddd; border-radius:8px; margin-bottom:10px; font-size:14px; }
  .product-form button { width:100%; padding:10px; margin-top:5px; border:none; border-radius:8px; font-weight:600; cursor:pointer; font-size:14px; }
  .save-btn { background:#4f46e5; color:white; }
  .clear-btn { background:#e5e7eb; color:#111; }

  /* Lista de produtos embaixo do formulário */
  .products-list { display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); gap:20px; margin-top:20px; }

  .product-card { background:white; border-radius:12px; padding:15px; display:flex; flex-direction:column; box-shadow:0 4px 12px rgba(0,0,0,0.08); transition:transform 0.2s; }
  .product-card:hover { transform:translateY(-5px); }
  .product-card img { width:100%; height:160px; object-fit:cover; border-radius:8px; margin-bottom:10px; }
  .product-card h3 { font-size:18px; margin:0 0 5px; color:#111; }
  .product-card p { font-size:14px; margin:2px 0; color:#555; }
  .product-card .options { display:flex; gap:5px; flex-wrap:wrap; margin-top:5px; }
  .product-card .options span { font-size:12px; padding:4px 8px; border-radius:6px; background:#eef2ff; color:#4f46e5; }
  .product-card button { margin-top:auto; padding:8px; border:none; border-radius:6px; cursor:pointer; font-size:13px; }
  .edit-btn { background:#3b82f6; color:white; margin-right:5px; }
  .delete-btn { background:#ef4444; color:white; }

  .img-preview { width:100%; height:150px; object-fit:cover; border-radius:8px; margin-bottom:10px; display:none; }
  .option-inputs { display:flex; gap:5px; margin-top:5px; flex-wrap:wrap; }
  .option-inputs input { flex:1; }

</style>
</head>
<body>

<header>
  <h1>Gerenciador de Produtos</h1>
  <button id="openStoreBtn">Abrir Vitrine</button>
</header>

<main>
  <!-- Formulário moderno -->
  <div class="product-form">
    <h2>Adicionar / Editar Produto</h2>
    <form id="productForm">
      <label>Título</label>
      <input type="text" id="title" required>

      <label>Preço Varejo</label>
      <input type="number" step="0.01" id="price" required>

      <label>Preço Atacado</label>
      <input type="number" step="0.01" id="bulkPrice" required>

      <label>Quantidade Disponível</label>
      <input type="number" id="quantity" required>

      <label>Imagem</label>
      <input type="file" id="image">
      <img id="imgPreview" class="img-preview" src="" alt="Preview">

      <label><input type="checkbox" id="enableSize"> Habilitar Tamanhos</label>
      <input type="text" id="sizes" placeholder="P, M, G" style="display:none;">

      <label><input type="checkbox" id="enableColor"> Habilitar Cores</label>
      <input type="text" id="colors" placeholder="Vermelho, Azul" style="display:none;">

      <div id="optionsContainer"></div>
      <button type="button" id="addOptionBtn">Adicionar Opção</button>

      <div style="margin-top:10px;">
        <button type="submit" class="save-btn">Salvar Produto</button>
        <button type="button" class="clear-btn" id="clearForm">Limpar</button>
      </div>
    </form>
  </div>

  <!-- Lista de produtos organizada embaixo do formulário -->
  <div class="products-list" id="products"></div>
</main>

<script>
let products = JSON.parse(localStorage.getItem('products')) || [];
let editId = null;

// Funções principais
function saveProducts() {
  localStorage.setItem('products', JSON.stringify(products));
  renderProducts();
}

function renderProducts() {
  const container = document.getElementById('products');
  container.innerHTML = '';
  if(products.length === 0) { container.innerHTML = '<p style="color:#555;">Nenhum produto salvo.</p>'; return; }
  products.forEach((p, idx)=>{
    const card = document.createElement('div');
    card.className = 'product-card';
    card.innerHTML = `
      <img src="${p.imageData||''}" alt="Imagem">
      <h3>${p.title}</h3>
      <p>Preço Varejo: R$ ${p.price.toFixed(2)}</p>
      <p>Preço Atacado: R$ ${p.bulkPrice.toFixed(2)}</p>
      <p>Qtd Disponível: ${p.quantity}</p>
      ${p.enableSize&&p.sizes.length?'<p>Tamanhos: '+p.sizes.join(', ')+'</p>':''}
      ${p.enableColor&&p.colors.length?'<p>Cores: '+p.colors.join(', ')+'</p>':''}
      <div class="options">${p.options.map(o=>o.values.map(v=>`<span>${v}</span>`).join('')).join('')}</div>
      <div style="margin-top:10px;">
        <button class="edit-btn" data-idx="${idx}">Editar</button>
        <button class="delete-btn" data-idx="${idx}">Remover</button>
      </div>
    `;
    container.appendChild(card);
  });
  attachCardEvents();
}

function attachCardEvents() {
  document.querySelectorAll('.edit-btn').forEach(btn => { btn.onclick = ()=>editProduct(btn.dataset.idx); });
  document.querySelectorAll('.delete-btn').forEach(btn => { btn.onclick = ()=>{ if(confirm('Remover produto?')){ products.splice(btn.dataset.idx,1); saveProducts(); } }; });
}

function editProduct(idx) {
  const p = products[idx];
  editId = idx;
  document.getElementById('title').value = p.title;
  document.getElementById('price').value = p.price;
  document.getElementById('bulkPrice').value = p.bulkPrice;
  document.getElementById('quantity').value = p.quantity;
  document.getElementById('imgPreview').src = p.imageData||'';
  document.getElementById('imgPreview').style.display = p.imageData?'block':'none';
  document.getElementById('enableSize').checked = p.enableSize;
  document.getElementById('sizes').style.display = p.enableSize?'block':'none';
  document.getElementById('sizes').value = p.sizes.join(', ');
  document.getElementById('enableColor').checked = p.enableColor;
  document.getElementById('colors').style.display = p.enableColor?'block':'none';
  document.getElementById('colors').value = p.colors.join(', ');
  document.getElementById('optionsContainer').innerHTML = '';
  p.options.forEach(opt=>addOption(opt.name,opt.values));
}

document.getElementById('enableSize').onchange = e => { document.getElementById('sizes').style.display = e.target.checked?'block':'none'; };
document.getElementById('enableColor').onchange = e => { document.getElementById('colors').style.display = e.target.checked?'block':'none'; };

function addOption(name='', values=[]) {
  const container = document.getElementById('optionsContainer');
  const div = document.createElement('div');
  div.className = 'option-inputs';
  div.innerHTML = `<input placeholder="Nome da opção" value="${name}" class="opt-name"><input placeholder="Valores separados por ," value="${values.join(', ')}" class="opt-values"><span class="remove-btn">x</span>`;
  div.querySelector('.remove-btn').onclick = ()=>div.remove();
  container.appendChild(div);
}
document.getElementById('addOptionBtn').onclick = ()=>addOption();

document.getElementById('image').onchange = e => {
  const file = e.target.files[0];
  if(file){
    const reader = new FileReader();
    reader.onload = ev => { const img = document.getElementById('imgPreview'); img.src = ev.target.result; img.style.display='block'; };
    reader.readAsDataURL(file);
  }
};

document.getElementById('productForm').onsubmit = e => {
  e.preventDefault();
  const p = {
    title: document.getElementById('title').value,
    price: parseFloat(document.getElementById('price').value)||0,
    bulkPrice: parseFloat(document.getElementById('bulkPrice').value)||0,
    quantity: parseInt(document.getElementById('quantity').value)||0,
    imageData: document.getElementById('imgPreview').src||'',
    enableSize: document.getElementById('enableSize').checked,
    sizes: document.getElementById('sizes').value.split(',').map(s=>s.trim()).filter(Boolean),
    enableColor: document.getElementById('enableColor').checked,
    colors: document.getElementById('colors').value.split(',').map(s=>s.trim()).filter(Boolean),
    options: Array.from(document.querySelectorAll('#optionsContainer > .option-inputs')).map(d=>({ name:d.querySelector('.opt-name').value, values:d.querySelector('.opt-values').value.split(',').map(v=>v.trim()).filter(Boolean) }))
  };
  if(editId!==null){ products[editId]=p; editId=null; } else products.unshift(p);
  saveProducts();
  document.getElementById('productForm').reset();
  document.getElementById('imgPreview').style.display='none';
  document.getElementById('optionsContainer').innerHTML='';
};

document.getElementById('clearForm').onclick = () => { editId=null; document.getElementById('productForm').reset(); document.getElementById('imgPreview').style.display='none'; document.getElementById('optionsContainer').innerHTML=''; };

document.getElementById('openStoreBtn').onclick = () => { window.open('vitrine.html','_blank'); };

renderProducts();
</script>
</body>
</html>
